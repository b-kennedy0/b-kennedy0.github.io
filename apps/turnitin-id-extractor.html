<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Page Title -->
  <title>Turnitin ID Extractor</title>

  <!-- Meta Description for SEO -->
  <meta name="description" content="Turnitin ID Extractor: Extract nine-digit Turnitin submission IDs from raw data for use with the Kennedy Marking Tracker.">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">

  <!-- Character Encoding -->
  <meta charset="utf-8">

  <!-- Responsive Design Settings -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <!-- jQuery Library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- Bootstrap JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <style>
    /* Navigation Bar Styling */
    .navbar {
      margin-bottom: 0;
      border-radius: 0;
      background-color: #082954;
    }

    /* Grid Layout Adjustments */
    .row.content {
      height: 450px;
    }

    /* Sidebar Styling */
    .sidenav {
      padding-top: 20px;
      background-color: #ffffff;
      height: 100%;
    }

    /* Footer Styling */
    footer {
      background-color: #082954;
      color: white;
      padding: 15px;
    }

    /* Responsive Design for Smaller Screens */
    @media screen and (max-width: 767px) {
      .sidenav {
        height: auto;
        padding: 15px;
      }

      .row.content {
        height: auto;
      }
    }

    /* Styling for the Well Component */
    .well {
      background-color: white;
      border: none;
    }

    /* CSS Animations for Zoom In and Zoom Out */
    @keyframes zoomIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes zoomOut {
      from {
        transform: scale(1);
        opacity: 1;
      }
      to {
        transform: scale(0.8);
        opacity: 0;
      }
    }

    .zoom-animate-in {
      animation: zoomIn 0.3s ease forwards;
    }

    .zoom-animate-out {
      animation: zoomOut 0.3s ease forwards;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }

    .switch input {
      display: none;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 34px;
    }

    .slider .emoji {
      position: absolute;
      top: 4px;
      left: 6px;
      font-size: 20px;
      transition: transform 0.4s ease;
      pointer-events: none;
    }

    input:checked + .slider .emoji {
      transform: translateX(26px);
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #2196F3;
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    body.dark-mode {
      background-color: #121212 !important;
      color: #f0f0f0;
    }

    .dark-mode .navbar,
    .dark-mode footer {
      background-color: #1f1f1f;
    }

    .dark-mode .sidenav {
      background-color: #121212 !important;
      color: #f0f0f0;
      height: 100%;
    }

    .dark-mode .row.content {
      background-color: #121212 !important;
    }

    .dark-mode .well,
    .dark-mode textarea,
    .dark-mode .form-control {
      background-color: #1e1e1e;
      color: #f0f0f0;
      border-color: #444;
    }

    .dark-mode .alert-success {
      background-color: #2e7d32;
      color: #dcedc8;
    }

    .dark-mode .alert-danger {
      background-color: #b71c1c;
      color: #ffcdd2;
    }

    .dark-mode .btn-primary,
    .dark-mode .btn-success,
    .dark-mode .btn-secondary {
      border: none;
    }
  </style>
</head>

<body>

<!-- Navigation Bar -->
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <!-- Collapsible Menu Button for Small Screens -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://bradleykennedy.co.uk/apps/turnitin-id-extractor">Brad K - TurnitIn ID Extractor</a>
    </div>

    <!-- Navigation Links -->
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="active"><a href="https://bradleykennedy.co.uk/apps/turnitin-id-extractor">Home</a></li>
        <li><a href="https://bradleykennedy.co.uk/apps">App Browser</a></li>
        <li><a href="https://bradleykennedy.co.uk/contact">Contact</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <!-- Future Login Option (Commented Out) -->
        <!-- <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li> -->
        <div class="text-right" style="margin-top: 10px;">
          <label class="switch">
            <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
            <span class="slider round"><span class="emoji">‚òÄÔ∏è</span></span>
          </label>
        </div>
      </ul>
    </div>
  </div>
</nav>

  <!-- Main Content Container -->
  <div class="container-fluid text-center">
    
    <div class="row content">

      <!-- Left Sidebar (Empty for Layout Purposes) -->
      <div class="col-sm-2 sidenav"></div>

      <!-- Main Content Area -->
      <div class="col-sm-8 text-left">
        <br>
        <h4>Instructions:</h4>
        <b>1.</b> Whilst viewing the Turnitin submission box, change the number of entries being shown to 'All' (see red box in example below). Then click and drag to highlight all of the submission data, and either right click and select copy or use (PC: Ctl+C Mac: Cmd+C).
        <img src="/assets/img/screenshots/turnitin-example.png" alt="Turnitin ID Extractor Example" style="width:100%; max-width:600px; display: block; margin-left: auto; margin-right: auto; cursor: pointer;" onclick="openImageZoom()">
        <p style="text-align: center; font-style: italic;">Click image to zoom</p>
        <br>
        <b>2.</b> Paste the data into the box below, either right click and select paste or use: (PC: Ctl+V Mac: Cmd+V).
        <br>
        <b>3.</b> Click 'Extract Turnitin IDs' to extract only the nine-digit submission IDs. You can now copy/paste these into the <a href="https://apps.bradk.co.uk" target="_blank" rel="noopener noreferrer">Kennedy Marking Tracker</a>.</p>
        <br>

        <!-- Text Area for URLs -->
        <textarea class="form-control" rows="18" id="a" placeholder="Paste Turnitin raw data here"></textarea>
        <br>
        
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" value="" id="removeDuplicates">
          <label class="form-check-label" for="removeDuplicates">
            Remove Duplicates
          </label>
        </div>

        <!-- Buttons for Opening URLs and Resetting the Input -->
        <input type="button" class="btn btn-primary btn-lg" value="Extract Turnitin IDs" onclick="extractTurnitinIDs()">
        <button class="btn btn-success btn-lg mt-3" onclick="copyToClipboard()">Copy IDs</button>
        <input type="button" value="Reset" class="btn btn-secondary btn-lg" onclick="document.getElementById('a').value=''; var ch=document.getElementById('countHeading'); if(ch){ch.remove();}">
        <br><br>

        <div id="alertBox" class="alert alert-success mt-3" style="display: none;" role="alert"></div>

        <!-- Troubleshooting & Security Information -->
        <div>
          <h4>Data Security</h4>
          <p>The data you paste into this app is NOT saved. This app runs in your browser window, meaning the data is not collected or stored. If you'd like to verify this for yourself, click to <a href="https://github.com/b-kennedy0/b-kennedy0.github.io/blob/master/apps/turnitin-id-extractor.html" target="_blank" rel="noopener noreferrer">view the source code</a>.</p>
        </div>
        
        <div>
          <h4>Example Turnitin Text</h4>
          <p>To try out this tool using some example data, click the button below.</p>
          <input type="button" class="btn btn-primary btn-lg" value="Insert Example Data" onclick="insertExampleData()">
        </div>

        <!-- JavaScript to Get ID numbers -->
        <script>
          function extractTurnitinIDs() {
            var inputText = document.getElementById('a').value;
            var idPattern = /\b\d{9}\b/g; // Match exactly nine-digit numbers
            var matches = inputText.match(idPattern);

            if (matches) {
              var countHeading = document.getElementById('countHeading');
              if (!countHeading) {
                countHeading = document.createElement('h3');
                countHeading.id = 'countHeading';
                countHeading.style.textAlign = 'center';
                countHeading.style.fontWeight = 'bold';
                var textarea = document.getElementById('a');
                textarea.parentNode.insertBefore(countHeading, textarea);
              }
              let extracted = matches ? matches : [];
              if (document.getElementById('removeDuplicates').checked) {
                extracted = [...new Set(extracted)];
              }
              countHeading.innerHTML = '‚úÖ ' + extracted.length + ' IDs found!';
              document.getElementById('a').value = extracted.join('\n'); // Display IDs as a list
              showAlert(`Extracted ${extracted.length} ID${extracted.length === 1 ? '' : 's'}`);
            } else {
              var oldHeading = document.getElementById('countHeading');
              if (oldHeading) {
                oldHeading.remove();
              }
              document.getElementById('a').value = "No Turnitin IDs found.";
              showAlert('No Turnitin IDs found.');
            }
          }

          function copyToClipboard() {
            const textArea = document.getElementById('a');
            textArea.select();
            document.execCommand('copy');
            showAlert('Copied to clipboard!');
          }

          function openImageZoom() {
            const overlay = document.getElementById("imageZoomOverlay");
            const zoomedImage = document.getElementById("zoomedImage");

            overlay.style.display = "block";
            zoomedImage.classList.remove("zoom-animate-out");
            zoomedImage.classList.add("zoom-animate-in");
          }

          function closeImageZoom() {
            const overlay = document.getElementById("imageZoomOverlay");
            const zoomedImage = document.getElementById("zoomedImage");

            zoomedImage.classList.remove("zoom-animate-in");
            zoomedImage.classList.add("zoom-animate-out");

            // Delay hiding the overlay until the animation completes
            setTimeout(() => {
              overlay.style.display = "none";
            }, 300);
          }

          function insertExampleData() {
            const exampleText = `Anonymous Marking Enabled	
XX1234 J111111
123456789	3/04/25, 12:57	 24%	--/100	The student has not viewed this paper.		
	Anonymous Marking Enabled	
XX1234 Component Two
234567891	3/04/25, 12:56	 26%	--/100	The student has not viewed this paper.		
	Anonymous Marking Enabled	
XX1234_COMPONENTTWO_J222222
345678912	3/04/25, 12:53	 20%	--/100	The student has not viewed this paper.		
	Anonymous Marking Enabled	
J333333
456789123	3/04/25, 12:51	 22%	--/100	The student has not viewed this paper.		
	Anonymous Marking Enabled	
XX1234_Component Two_J444444
567891234	3/04/25, 12:42	 39%	--/100	The student has not viewed this paper.		
	Anonymous Marking Enabled	
J555555
678912345	3/04/25, 12:34	 25%	--/100	The student has not viewed this paper.		
	Anonymous Marking Enabled	
J666666 SO4313 Assessment 2
789123456	3/04/25, 12:31	 44%	--/100	The student has not viewed this paper.		
	Anonymous Marking Enabled	
J777777
891234567	3/04/25, 12:29	 13%	--/100	The student has not viewed this paper.		
	Anonymous Marking Enabled	
J888888 XX1234 Component Two
912345678	3/04/25, 11:59	 17%	--/100	The student has not viewed this paper.		
	Anonymous Marking Enabled	
My Super Assessment
123456789	3/04/25, 11:53	 12%	--/100	The student has not viewed this paper.`;

            document.getElementById('a').value = exampleText;
          }

          function showAlert(message) {
            const alertBox = document.getElementById('alertBox');
            alertBox.textContent = message;
            
            if (message.includes("No Turnitin IDs found")) {
              alertBox.className = 'alert alert-danger mt-3';
            } else {
              alertBox.className = 'alert alert-success mt-3';
            }

            alertBox.style.display = 'block';
            setTimeout(() => {
              alertBox.style.display = 'none';
            }, 3000);
          }

          function toggleDarkMode() {
            document.body.classList.toggle("dark-mode");

            const emojiSpan = document.querySelector(".slider .emoji");
            emojiSpan.textContent = document.body.classList.contains("dark-mode") ? "üåô" : "‚òÄÔ∏è";
          }
          // Check device for dark mode preference
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.body.classList.add("dark-mode");
      const emojiSpan = document.querySelector(".slider .emoji");
      emojiSpan.textContent = "üåô"; // Change emoji to moon
      // Set the toggle to checked
      document.getElementById("darkModeToggle").checked = true;
    }
        </script>

        <br>
      </div>

      <!-- Right Sidebar (Empty for Layout Purposes) -->
      <div class="col-sm-2 sidenav">
        <!-- <div class="well"></div> -->
        <!-- Future Content (Commented Out) -->
        <!-- <div class="well"><p>Text on the right side of the screen.</p></div> -->
      </div>

    </div>
  </div>

  <!-- Image Zoom Overlay -->
  <div id="imageZoomOverlay" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); text-align: center; z-index: 1000;">
    <span onclick="closeImageZoom()" style="position: absolute; top: 20px; right: 30px; font-size: 30px; color: white; cursor: pointer;">&times;</span>
    <img id="zoomedImage" src="/assets/img/screenshots/turnitin-example.png" onclick="closeImageZoom(); event.stopPropagation();" style="max-width: 90%; max-height: 90%; margin-top: 5%; cursor: pointer; transform-origin: center;">
  </div>

  <!-- Footer Section -->
  <footer class="container-fluid text-center">
    <font color="#ffffff">¬© 2025 </font>
    <a href="https://bradleykennedy.co.uk/apps/turnitin-id-extractor"><font color="#ffffff">Brad K - Turnitin ID Extractor</font></a>
    <font color="#ffffff"> | </font>
    <a href="https://bradleykennedy.co.uk/contact"><font color="#ffffff">Contact</font></a>
  </footer>

</body>

</html>